local AbilityService = game:GetService("AbilityService")
local EntityService = game:GetService("EntityService")

-- Create the gun ability
local gunAbility = AbilityService.createAbility("gun_ability", {
    inputType = AbilityInputType.HoldRelease, -- Hold to aim, release to fire
    displayName = "Gun",
    imageId = "rbxassetid://711038331", -- Replace with your gun icon
})

-- On release (fire)
gunAbility:onActivated(function(player, inputState)
    if inputState == AbilityInputState.Release then
        -- Create a projectile entity that looks like a bullet
        local bullet = EntityService.createImageEntity({
            position = player:getPosition() + Vector3.new(0, 2, 0),
            image = "rbxassetid://15186257924", -- Replace with bullet image
            velocity = player:getLookVector() * 100,
            lifespan = 2,
            collideWithEntities = true
        })

        -- Damage nearby enemies hit by the bullet
        bullet:onTouched(function(hitEntity)
            if hitEntity:isEnemy(player) then
                hitEntity:damage(30) -- Customize damage here
            end
        end)
    end
end)

-- Give the ability to players
AbilityService.giveAbilityToAll(gunAbility)
